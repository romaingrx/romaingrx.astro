---
import { render } from 'astro:content';

import { components } from '@/components/blog/components/index.astro';
import BlogPost from '@/layouts/BlogPost.astro';
import { getBlogPosts } from '@/lib/collections';

export async function getStaticPaths() {
  const posts = await getBlogPosts();
  return posts.map(post => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<BlogPost blog={post}>
  <Content components={components} />
</BlogPost>
